{"version":3,"sources":["components/layout/Alert/Alert.module.css","redux/reducers/board.js","constants/boardDimensions.js","redux/reducers/alert.js","redux/reducers/draggedItem.js","constants/dnd/types.js","redux/reducers/equippedItems.js","redux/reducers/index.js","redux/actions/types.js","redux/store.js","components/square/Square.tsx","redux/actions/alert.js","redux/actions/board.js","components/square/Overlay.js","redux/actions/draggedItem.js","containers/BoardSquare/BoardSquare.js","components/items/CommonItem/CommonItem.js","containers/SquareCommonItem/SquareCommonItem.js","redux/actions/equippedItems.js","components/board/Board.tsx","components/layout/Alert/Alert.js","components/equippedInventory/equippedInventoryItem/equippedInventoryItem.js","components/equippedInventory/equippedInventoryContainer.js","App.tsx","index.js"],"names":["module","exports","fillInitialState","board","y","x","mainCell","width","height","initialState","xUp","xDown","yUp","yDown","hoveredSquare","allHoveredSquares","canDrop","ItemTypes","cells","i","id","allowedItemType","item","combineReducers","state","action","type","newBoard","squares","forEach","square","alert","filter","alertId","draggedItem","point","equippedItems","middleware","thunk","createStore","rootReducer","composeWithDevTools","applyMiddleware","Container","styled","div","Square","children","_setAlert","_removeAlert","_addInventory","boxId","dispatch","getState","allAddedSquares","alertMsg","j","push","canAdd","hoveredX","hoveredY","_addItems","msg","alertType","timeout","uuid4","setTimeout","setAlert","window","addInventory","store","_removeItems","coordsArr","removeItems","itemsToRemove","currX","currY","Overlay","color","style","position","top","left","zIndex","opacity","backgroundColor","_addDraggedItem","Div","BoardSquare","coords","useState","isOver","setIsOver","useSelector","canDropRedux","useDispatch","useDrop","accept","drop","monitor","isInventoryId","addItems","hover","pointCoords","_setHoveredSquares","setHoveredSquares","useEffect","idx","findIndex","el","ref","Span","span","CommonItem","forwardedRef","SquareCommonItem","useDrag","begin","mainCellX","mainCellY","addDraggedItem","end","cellId","_removeEquippedItem","collect","drag","RenderSquare","Board","boardItems","boardHeight","setBoardHeight","boardEl","useRef","handleResize","current","clientWidth","addEventListener","removeEventListener","renderSquare","squareContent","key","Alert","alerts","length","map","className","classes","innerWidth","toString","EquippedInventoryItem","_setEquippedItem","setEquippedItem","find","cell","shallow","EquippedInventoryContainer","App","equippedItemsCells","DndProvider","backend","HTML5Backend","slice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e24a2c40.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Alert\":\"Alert_Alert__2OSub\",\"alert-danger\":\"Alert_alert-danger__JpjkH\",\"alert-success\":\"Alert_alert-success__VexSb\"};","import {xMin, xMax, yMin, yMax} from \"../../constants/boardDimensions\";\r\nimport {SQUARES_FILL, SQUARES_RELEASE} from \"../actions/types\";\r\n\r\n// board - matrix;\r\n// board[y][x] - single cell, if null - empty,\r\n// if {mainCell:[x,y],width,height} - filled\r\n// const initialState = {\r\n//   board: [],\r\n// }\r\n\r\nconst fillInitialState = () => {\r\n  const board = [];\r\n  for (let y = yMin; y <= yMax; y++) {\r\n    board[y] = [];\r\n    for (let x = xMin; x <= xMax; x++) {\r\n      if(x === 3 && y === 3 || x === 3 && y === 4 || x === 4 && y === 3 || x === 4 && y === 4\r\n        || x === 3 && y === 2 || x === 4 && y === 2)\r\n      {\r\n        board[y][x] = {\r\n          mainCell: [3,2],\r\n          width: 2,\r\n          height: 3\r\n        };\r\n      } else if (x === 8 && y === 4 ||x === 9 && y === 4\r\n         ||x === 8 && y === 5 ||x === 9 && y === 5 )\r\n      {\r\n        board[y][x] = {\r\n          mainCell: [8,4],\r\n          width: 2,\r\n          height: 2\r\n        };\r\n      } else board[y][x] = null;\r\n    }\r\n  }\r\n  return {board};\r\n}\r\n\r\nexport default (state = fillInitialState(), action) => {\r\n  switch (action.type) {\r\n    case SQUARES_FILL: {\r\n      // immutable way\r\n      const newBoard = [...state.board];\r\n      const {squares, mainCell, width, height} = action;\r\n      squares.forEach(square => {\r\n        const [x,y] = square;\r\n        newBoard[y][x] = {\r\n          mainCell,\r\n          width,\r\n          height\r\n        };\r\n      })\r\n      return {\r\n        ...state,\r\n        board: newBoard,\r\n      }\r\n    }\r\n    case SQUARES_RELEASE: {\r\n      const newBoard = [...state.board];\r\n      action.squares.forEach(square => {\r\n        const [x,y] = square;\r\n        newBoard[y][x] = null;\r\n      })\r\n      return {\r\n        ...state,\r\n        board: newBoard,\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","const xMin = 0;\r\nconst xMax = 16;\r\nconst yMin = 0;\r\nconst yMax = 5;\r\n\r\nexport {\r\n  xMin, xMax, yMin, yMax\r\n}","import {ALERT_REMOVE, ALERT_SET} from \"../actions/types\";\r\n\r\nconst initialState = [];\r\n\r\nexport default (state = initialState, action) => {\r\n  switch(action.type) {\r\n    case ALERT_SET:\r\n      return [\r\n        ...state,\r\n        action.alert\r\n      ]\r\n    case ALERT_REMOVE:\r\n      return state.filter(alert => alert.id !== action.alertId)\r\n    default:\r\n      return state;\r\n  }\r\n}","import {\r\n  DRAGGED_ITEM_SET,\r\n  DRAGGED_ITEM_RELEASE,\r\n  HOVERED_SQUARES_SET,\r\n  HOVERED_SQUARES_REMOVE\r\n} from \"../actions/types\";\r\n\r\nconst initialState = {\r\n  mainCell: null,\r\n  width: null,\r\n  height: null,\r\n\r\n  xUp: null,\r\n  xDown: null,\r\n  yUp: null,\r\n  yDown: null,\r\n\r\n  // Square, hovered with mouse\r\n  hoveredSquare: null,\r\n  // All hovered squares depending on the size of the item\r\n  allHoveredSquares: [],\r\n\r\n  canDrop: false,\r\n}\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case DRAGGED_ITEM_SET: {\r\n      const {mainCell, width, height,xUp,xDown,yUp,yDown} = action;\r\n      return {\r\n        ...state,\r\n        mainCell,\r\n        width,\r\n        height,\r\n        xUp,\r\n        xDown,\r\n        yUp,\r\n        yDown\r\n      }\r\n    }\r\n    case DRAGGED_ITEM_RELEASE:\r\n    case HOVERED_SQUARES_REMOVE: {\r\n      return initialState;\r\n    }\r\n    case HOVERED_SQUARES_SET: {\r\n      return {\r\n        ...state,\r\n        hoveredSquare: action.point,\r\n        allHoveredSquares: action.squares,\r\n        canDrop: action.canDrop,\r\n      }\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","export const ItemTypes = {\r\n  ITEM: 'item'\r\n}","import {\r\n  EQUIPPED_ITEM_SET,\r\n  EQUIPPED_ITEM_REMOVE\r\n} from \"../actions/types\";\r\nimport {ItemTypes} from \"../../constants/dnd/types\";\r\n\r\n// cells[x] - {id: number, allowedItemType: string, item: null | {mainCell, width, height}}\r\nconst initialState = {\r\n  cells: [],\r\n}\r\n\r\nconst fillInitialState = () => {\r\n  const cells = [];\r\n  for(let i = 0; i < 10; i++) {\r\n    if(i === 0) {\r\n      cells[i] = {\r\n        id: i,\r\n        allowedItemType: ItemTypes.ITEM,\r\n        item: null,\r\n      }\r\n    } else {\r\n      cells[i] = {\r\n        id: i,\r\n        allowedItemType: 'SomeOtherType',\r\n        item: null,\r\n      }\r\n    }\r\n  }\r\n  return {cells};\r\n}\r\n\r\nexport default (state = fillInitialState(), action) => {\r\n  switch (action.type) {\r\n    case EQUIPPED_ITEM_SET: {\r\n      const cells = [...state.cells];\r\n      cells[action.id] = {\r\n        ...cells[action.id],\r\n        item: action.item,\r\n      }\r\n      return {\r\n        ...state,\r\n        cells,\r\n      }\r\n    }\r\n    case EQUIPPED_ITEM_REMOVE: {\r\n      const cells = [...state.cells];\r\n      cells[action.id] = {\r\n        ...cells[action.id],\r\n        item: null,\r\n      }\r\n      return {\r\n        ...state,\r\n        cells,\r\n      };\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n}\r\n","import {combineReducers} from 'redux';\r\nimport boardReducer from './board';\r\nimport alertReducer from './alert';\r\nimport draggedItemReducer from './draggedItem';\r\nimport equippedItemsReducer from './equippedItems';\r\n\r\nexport default combineReducers({\r\n  board: boardReducer,\r\n  alert: alertReducer,\r\n  draggedItem: draggedItemReducer,\r\n  equippedItems: equippedItemsReducer,\r\n})","// board\r\nexport const SQUARES_FILL = 'SQUARES_FILL';\r\nexport const SQUARES_RELEASE = 'SQUARES_RELEASE';\r\n\r\n// alerts\r\nexport const ALERT_SET = 'ALERT_SET';\r\nexport const ALERT_REMOVE = 'ALERT_REMOVE';\r\n\r\n// dragged item\r\nexport const DRAGGED_ITEM_SET = 'DRAGGED_ITEM_SET';\r\nexport const DRAGGED_ITEM_RELEASE = 'DRAGGED_ITEM_RELEASE';\r\n\r\n// hovered squares\r\nexport const HOVERED_SQUARES_SET = 'HOVERED_SQUARES_SET';\r\nexport const HOVERED_SQUARES_REMOVE = 'HOVERED_SQUARES_REMOVE';\r\n\r\n// equipped items\r\nexport const EQUIPPED_ITEM_SET = 'EQUIPPED_ITEM_SET';\r\nexport const EQUIPPED_ITEM_REMOVE = 'EQUIPPED_ITEM_REMOVE';\r\n\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from './reducers';\r\n\r\nconst middleware = [thunk];\r\n\r\nexport default createStore(rootReducer, composeWithDevTools(\r\n  applyMiddleware(...middleware)\r\n));\r\n","import React from 'react'\r\nimport styled from \"styled-components\";\r\n\r\nconst Container = styled.div`\r\n  backgroundColor: background: linear-gradient(#878c8a,#636967);\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justifyContent: center;\r\n  alignItems: center;\r\n`;\r\n\r\n\r\n\r\ninterface Props {\r\n  children: any;\r\n}\r\n\r\nconst Square = ({children}: Props) => {\r\n  return (\r\n    <Container>\r\n      {children}\r\n    </Container>\r\n  )\r\n}\r\n\r\n//@ts-ignore\r\nexport default Square;","import {ALERT_SET, ALERT_REMOVE} from \"./types\";\r\nimport {v4 as uuid4} from 'uuid';\r\n\r\nconst _setAlert = (alert) => {\r\n  return {type: ALERT_SET, alert}\r\n}\r\nconst _removeAlert = (alertId) => {\r\n  return {type: ALERT_REMOVE, alertId}\r\n}\r\n\r\nexport const setAlert = (msg, alertType, timeout = 4000) => {\r\n  return dispatch => {\r\n    const id = uuid4();\r\n    dispatch(_setAlert({msg, alertType, id}));\r\n\r\n    setTimeout(() => dispatch(_removeAlert(id)), timeout);\r\n  }\r\n}","import {SQUARES_FILL, SQUARES_RELEASE} from \"./types\";\r\nimport {xMax, xMin, yMax, yMin} from \"../../constants/boardDimensions\";\r\nimport store from \"../store\";\r\nimport {setAlert} from \"./alert\";\r\n\r\n// mainCell, width, height // mainCell = [x,y]\r\nconst _addInventory = (boxId,x,y) => {\r\n  return (dispatch, getState) => {\r\n    const {board} = getState().board;\r\n\r\n    const allAddedSquares = [];\r\n    let alertMsg = '';\r\n\r\n    for (let i = boxId[0]; i < boxId[0] + x; i++) {\r\n      for (let j = boxId[1]; j < boxId[1] + y; j++) {\r\n        allAddedSquares.push([i, j]);\r\n      }\r\n    }\r\n\r\n    let canAdd = true;\r\n\r\n    for (let i = xMin; i <= xMax; i++) {\r\n      for (let j = yMin; j <= yMax; j++) {\r\n        allAddedSquares.forEach(hoveredSquare => {\r\n          const [hoveredX, hoveredY] = hoveredSquare;\r\n          if (hoveredX < xMin || hoveredX > xMax || hoveredY < yMin || hoveredY > yMax) {\r\n            canAdd = false;\r\n            alertMsg = 'The object can not be placed outside the board.\\n' +\r\n              'The board has the following coordinates:\\n' +\r\n              `x: ${xMin} - ${xMax}\\ny: ${yMin} - ${yMax}`;\r\n          } else if (hoveredX === i && hoveredY === j) {\r\n            if (board[j][i] !== null) {\r\n                canAdd = false;\r\n              alertMsg = 'The object can not be placed on the other object!'\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    if(canAdd) {\r\n      dispatch(_addItems(allAddedSquares, boxId, x, y));\r\n    } else {\r\n      dispatch(setAlert('Sorry. ' + alertMsg, 'danger'));\r\n    }\r\n  }\r\n}\r\n\r\n// add function to be able use from console\r\nwindow.addInventory = (boxId, x, y) => store.dispatch(_addInventory(boxId, x, y));\r\n\r\nconst _addItems = (squares, mainCell, width, height) => {\r\n  return {type: SQUARES_FILL, squares, mainCell, width, height};\r\n}\r\n\r\nconst _removeItems = (coordsArr) => {\r\n  return {type: SQUARES_RELEASE, squares: coordsArr};\r\n}\r\n\r\n// add items fetched from hovered items\r\nconst addItems = ([x,y]) => {\r\n  return (dispatch, getState) => {\r\n    const {allHoveredSquares, xDown, yDown, width, height} = getState().draggedItem;\r\n\r\n    dispatch(_addItems(allHoveredSquares, [x - xDown, y - yDown], width, height));\r\n  }\r\n}\r\n\r\n// remove items from board\r\nconst removeItems = ([x,y], width = 1, height = 1) => {\r\n  return dispatch => {\r\n    const itemsToRemove = [];\r\n    for(let currX = x; currX < x + width; currX++) {\r\n      for(let currY = y; currY < y + height; currY++) {\r\n        itemsToRemove.push([currX,currY]);\r\n      }\r\n    }\r\n\r\n    dispatch(_removeItems(itemsToRemove));\r\n  }\r\n}\r\n\r\nexport {\r\n  addItems,\r\n  removeItems\r\n}","import React from 'react';\r\n\r\nconst Overlay = ({color}) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'absolute',\r\n        top: '0',\r\n        left: '0',\r\n        height: '100%',\r\n        width: '100%',\r\n        zIndex: 0,\r\n        opacity: 0.5,\r\n        backgroundColor: color,\r\n      }}/>\r\n  );\r\n};\r\n\r\nexport default Overlay;","import {DRAGGED_ITEM_SET, HOVERED_SQUARES_SET, HOVERED_SQUARES_REMOVE} from \"./types\";\r\nimport {xMin, xMax, yMin, yMax} from \"../../constants/boardDimensions\";\r\n\r\nconst _addDraggedItem = (mainCell, width, height, xUp, xDown, yUp, yDown) => {\r\n  return {type: DRAGGED_ITEM_SET, mainCell, width, height, xUp, xDown, yUp, yDown};\r\n};\r\n\r\nconst _setHoveredSquares = (pointCoords, allHoveredSquares, canDrop) => {\r\n  return {type: HOVERED_SQUARES_SET, point: pointCoords, squares: allHoveredSquares, canDrop};\r\n};\r\n\r\nconst removeHoveredSquares = () => {\r\n  return {type: HOVERED_SQUARES_REMOVE};\r\n};\r\n\r\nconst addDraggedItem = ([x, y], mainCell = [x, y], width = 1, height = 1) => {\r\n  return dispatch => {\r\n    const [mainCellX, mainCellY] = mainCell;\r\n    // Maximum X and Y for given item (border)\r\n    const xMax = mainCellX + width - 1;\r\n    const yMax = mainCellY + height - 1;\r\n\r\n    // How many squares right from dragged point item fills (===0 when item 1x1 square)\r\n    const xUp = xMax - x;\r\n    // How many squares up from dragged point item fills\r\n    const yUp = yMax - y;\r\n    // How many squares left from dragged point item fills\r\n    const xDown = x - mainCellX;\r\n    // How many squares down from dragged point item fills\r\n    const yDown = y - mainCellY;\r\n\r\n    dispatch(_addDraggedItem(mainCell, width, height, xUp, xDown, yUp, yDown));\r\n  };\r\n};\r\n\r\nconst setHoveredSquares = ([x, y]) => {\r\n  return (dispatch, getState) => {\r\n    const {draggedItem: {xDown, xUp, yDown, yUp, mainCell, width, height}, board: {board}} = getState();\r\n\r\n    const allHoveredSquares = [];\r\n\r\n    for (let i = x - xDown; i <= x + xUp; i++) {\r\n      for (let j = y - yDown; j <= y + yUp; j++) {\r\n        allHoveredSquares.push([i, j]);\r\n      }\r\n    }\r\n    // here we want to check canDrop\r\n    let canDrop = true;\r\n    for (let i = xMin; i <= xMax; i++) {\r\n      for (let j = yMin; j <= yMax; j++) {\r\n        allHoveredSquares.forEach(hoveredSquare => {\r\n          const [hoveredX, hoveredY] = hoveredSquare;\r\n          if (hoveredX < xMin || hoveredX > xMax || hoveredY < yMin || hoveredY > yMax) {\r\n            canDrop = false;\r\n          } else if (hoveredX === i && hoveredY === j) {\r\n            if (board[j][i] !== null) {\r\n              if(hoveredX < mainCell[0] || hoveredX > mainCell[0] + width - 1\r\n                || hoveredY < mainCell[1] || hoveredY > mainCell[1] + height - 1) {\r\n                canDrop = false;\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n    dispatch(_setHoveredSquares([x, y], allHoveredSquares, canDrop));\r\n  }\r\n};\r\n\r\nexport {\r\n  addDraggedItem,\r\n  removeHoveredSquares,\r\n  setHoveredSquares\r\n}","import React, {useState, useEffect} from 'react'\r\nimport Square from \"../../components/square/Square\";\r\nimport {ItemTypes} from \"../../constants/dnd/types\";\r\nimport {useDrop} from \"react-dnd\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {addItems, removeItems} from \"../../redux/actions/board\";\r\nimport Overlay from \"../../components/square/Overlay\";\r\nimport {setHoveredSquares} from \"../../redux/actions/draggedItem\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Div = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n`;\r\n\r\nconst BoardSquare = ({coords: [x,y], children}) => {\r\n  const [isOver,setIsOver] = useState(false);\r\n\r\n  const [hoveredSquare, allHoveredSquares, canDropRedux, mainCell, width, height] =\r\n    // @ts-ignore - board does not exists on DefaultRootState\r\n    useSelector(({board, draggedItem}) =>\r\n    ([draggedItem.hoveredSquare, draggedItem.allHoveredSquares,\r\n    draggedItem.canDrop, draggedItem.mainCell, draggedItem.width, draggedItem.height]));\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const [{}, drop] = useDrop({\r\n    accept: ItemTypes.ITEM,\r\n    drop: (item, monitor) => {\r\n      if(monitor.canDrop()) {\r\n        if(item.isInventoryId === false) {\r\n          dispatch(removeItems(mainCell, width, height));\r\n        }\r\n        dispatch(addItems([x,y]));\r\n      }\r\n    },\r\n    hover: () => {\r\n      if(!hoveredSquare || (hoveredSquare[0] !== x || hoveredSquare[1] !== y)) {\r\n        dispatch(setHoveredSquares([x,y]));\r\n      }\r\n    },\r\n    canDrop: () => canDropRedux,\r\n  })\r\n\r\n  useEffect(() => {\r\n    const idx = allHoveredSquares.findIndex((el) => el[0] === x && el[1] === y);\r\n    if(idx !== -1) {\r\n      setIsOver(true);\r\n    } else {\r\n      setIsOver(false);\r\n    }\r\n  },[x,y,allHoveredSquares])\r\n\r\n  return (\r\n    <Div ref={drop}>\r\n      <Square>{children}</Square>\r\n      {/*{!isOver && canDropRedux && <Overlay color=\"yellow\" />}*/}\r\n      {isOver && !canDropRedux && <Overlay color=\"red\" />}\r\n      {isOver && canDropRedux && <Overlay color=\"green\" />}\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default BoardSquare;","import React from 'react';\r\nimport styled from \"styled-components\";\r\n\r\nconst Span = styled.span`\r\n  display: block;\r\n  position: relative;\r\n  cursor: move;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: black;\r\n`;\r\n\r\nconst CommonItem = ({children, forwardedRef}) => {\r\n  return (\r\n    <Span ref={forwardedRef}>{children}</Span>\r\n  );\r\n};\r\n\r\nexport default CommonItem;","import React from 'react';\r\nimport {ItemTypes} from '../../constants/dnd/types';\r\nimport {useDrag} from 'react-dnd';\r\nimport {useDispatch} from \"react-redux\";\r\nimport {addDraggedItem, removeHoveredSquares} from \"../../redux/actions/draggedItem\";\r\nimport CommonItem from \"../../components/items/CommonItem/CommonItem\";\r\nimport {removeEquippedItem} from \"../../redux/actions/equippedItems\";\r\n\r\nconst SquareCommonItem = ({coords: [x, y], mainCell, width, height, isInventoryId = false}) => {\r\n  const dispatch = useDispatch();\r\n  // Allow drag\r\n  const [{}, drag] = useDrag({\r\n    item: {type: ItemTypes.ITEM, isInventoryId},\r\n    begin() {\r\n      dispatch(addDraggedItem([x, y], mainCell, width, height));\r\n    },\r\n    end() {\r\n      // !== false coz can be 0\r\n      if(isInventoryId !== false) {\r\n        dispatch(removeEquippedItem(isInventoryId));\r\n      }\r\n      dispatch(removeHoveredSquares());\r\n    },\r\n    collect: () => {\r\n      return ({});\r\n    }\r\n  })\r\n\r\n  return (\r\n    <CommonItem forwardedRef={drag}>\r\n      {/*â™˜*/}\r\n    </CommonItem>\r\n  );\r\n};\r\n\r\nexport default SquareCommonItem;","import {EQUIPPED_ITEM_SET, EQUIPPED_ITEM_REMOVE} from \"./types\";\r\n\r\nconst _setEquippedItem = (cellId, item) => {\r\n  return {type: EQUIPPED_ITEM_SET, id: cellId, item}\r\n}\r\n\r\nconst _removeEquippedItem = (cellId) => {\r\n  return {type: EQUIPPED_ITEM_REMOVE, id: cellId}\r\n}\r\n\r\nconst setEquippedItem = (cellId) => {\r\n  return (dispatch, getState) => {\r\n    const item = getState().draggedItem;\r\n    const {mainCell, width, height} = item;\r\n\r\n    dispatch(_setEquippedItem(cellId, {mainCell, width, height}));\r\n  }\r\n}\r\n\r\nconst removeEquippedItem = (cellId) => {\r\n  return dispatch => {\r\n    dispatch(_removeEquippedItem(cellId));\r\n  }\r\n}\r\n\r\nexport {setEquippedItem, removeEquippedItem};","import React, {useEffect, useRef, useState} from 'react';\r\nimport BoardSquare from \"../../containers/BoardSquare/BoardSquare\";\r\nimport {yMax, yMin, xMax, xMin} from \"../../constants/boardDimensions\";\r\nimport {useSelector} from \"react-redux\";\r\nimport styled from \"styled-components\";\r\nimport SquareCommonItem from \"../../containers/SquareCommonItem/SquareCommonItem\";\r\n\r\nconst Container = styled.div`\r\n    width: 68%;\r\n    margin-left: 1%;\r\n    margin-right: 1%;\r\n    display: grid;\r\n    grid-template-columns: repeat(17, 1fr);\r\n    grid-template-rows: repeat(6, 1fr);\r\n    overflow: hidden;\r\n    @media (max-width: 780px) {\r\n      margin: 1% auto;\r\n      width: 100%;\r\n    }\r\n`;\r\n\r\nconst RenderSquare = styled.div`\r\n    height: 100%;\r\n    box-sizing: border-box; \r\n    border: 1px solid gray; \r\n`;\r\n\r\nconst Board = () => {\r\n  const squares = [];\r\n  // @ts-ignore - board does not exists on state\r\n  const boardItems = useSelector(state => state.board.board);\r\n  // proportional to width (17x6)\r\n  const [boardHeight, setBoardHeight] = useState(null);\r\n\r\n  const boardEl:React.MutableRefObject<null> | null = useRef(null);\r\n\r\n  // Make element proportional no matter where it placed\r\n  useEffect(() => {\r\n    // Handler to call on window resize\r\n    function handleResize() {\r\n      const current: HTMLElement | null = boardEl.current;\r\n      const width = current.clientWidth;\r\n      setBoardHeight(width * 0.35294);\r\n    }\r\n\r\n    // Add event listener\r\n    window.addEventListener(\"resize\", handleResize);\r\n\r\n    // Call handler right away so state gets updated with initial size\r\n    handleResize();\r\n\r\n\r\n    // Remove event listener on cleanup\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []); // Empty array ensures that effect is only run on mount\r\n\r\n  const renderSquare = (y: number, x: number) => {\r\n    if (!boardItems) {\r\n      return null;\r\n    }\r\n    let squareContent = null;\r\n    // Check if filled\r\n    const item = boardItems[y][x];\r\n    if (item) {\r\n      const {mainCell, width, height} = item;\r\n      squareContent = <SquareCommonItem coords={[x, y]} mainCell={mainCell}\r\n                                        width={width} height={height}/>;\r\n    }\r\n    return (\r\n      <RenderSquare key={x*20+y}>\r\n        <BoardSquare coords={[x, y]}>\r\n          {squareContent}\r\n        </BoardSquare>\r\n      </RenderSquare>\r\n    );\r\n  }\r\n\r\n  for (let y = yMin; y <= yMax; y++) {\r\n    for (let x = xMin; x <= xMax; x++) {\r\n      squares.push(renderSquare(y, x));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container ref={boardEl} style={{height: `${boardHeight+0}px`}}>\r\n      {squares}\r\n    </Container>\r\n  )\r\n};\r\n\r\nexport default Board;","import React from 'react';\r\nimport {useSelector} from \"react-redux\";\r\nimport classes from './Alert.module.css';\r\n\r\nconst Alert = () => {\r\n  const alerts = useSelector(({alert}) => alert);\r\n\r\n  const returnContent = alerts.length > 0 && alerts.map((alert,idx) => (\r\n    <div key={alert.id} className={`${classes.Alert} ${classes['alert-'+alert.alertType]}`}\r\n         style={{left: `${(window.innerWidth/2-150).toString()}px`, top: `${idx*100+60}px`}}>\r\n      {alert.msg}\r\n    </div>\r\n  ))\r\n\r\n\r\n  return returnContent;\r\n}\r\n\r\nexport default Alert;","import React from 'react';\r\nimport styled from \"styled-components\";\r\nimport {useDrop} from \"react-dnd\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {removeItems} from \"../../../redux/actions/board\";\r\nimport {setEquippedItem} from \"../../../redux/actions/equippedItems\";\r\nimport Overlay from \"../../square/Overlay\";\r\n\r\nconst Container = styled.div`\r\n    width: 90%;\r\n    position: relative;\r\n    height: 16%;\r\n    border-radius: 5px;\r\n    background: linear-gradient(#878c8a,#636967);\r\n    @media (max-width: 780px) {\r\n      height: 100%;\r\n      width: 17%;\r\n      flex-direction: row;\r\n    }\r\n`;\r\n\r\nconst EquippedInventoryItem = ({cellId, allowedItemType, item, children}) => {\r\n  const dispatch = useDispatch();\r\n  const [draggedItem, cells] = useSelector(({draggedItem, equippedItems}) =>\r\n    ([draggedItem, equippedItems.cells]));\r\n\r\n  const {mainCell, width, height} = draggedItem;\r\n\r\n  const [{isOver, canDrop}, drop] = useDrop({\r\n    accept: allowedItemType,\r\n    drop: (item, monitor) => {\r\n      if(monitor.canDrop()) {\r\n        dispatch(removeItems(mainCell, width, height));\r\n        dispatch(setEquippedItem(cellId));\r\n      }\r\n    },\r\n    canDrop: () => cells.find(cell => (cell.id === cellId && cell.item === null)),\r\n    collect: (monitor) => {\r\n      return ({isOver: monitor.isOver({ shallow: true }), canDrop: monitor.canDrop()});\r\n    }\r\n  })\r\n  return (\r\n    <Container ref={drop}>\r\n      {children}\r\n      {isOver && canDrop && <Overlay color='green' />}\r\n      {isOver && !canDrop && <Overlay color='red' />}\r\n      {!isOver && canDrop && <Overlay color='#889459' />}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EquippedInventoryItem;","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport EquippedInventoryItem from \"./equippedInventoryItem/equippedInventoryItem\";\r\nimport SquareCommonItem from \"../../containers/SquareCommonItem/SquareCommonItem\";\r\n\r\nconst EquippedInventoryContainer = ({cells}) => {\r\n\r\n  const Container = styled.div`\r\n    width: 15%;\r\n    max-width: 15%;\r\n    height: 100vh;\r\n    box-sizing: border-box;\r\n    padding: 2%;\r\n    background: linear-gradient(#525957,#545c59);\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: space-around;\r\n    @media (max-width: 780px) {\r\n      height: 20vh;\r\n      min-width: 100%;\r\n      flex-direction: row;\r\n    }\r\n  `;\r\n\r\n  return (\r\n    <Container>\r\n      {cells.map(cell => {\r\n        let children = null;\r\n        if(cell.item) {\r\n          const {mainCell, width, height} = cell.item;\r\n          children = <SquareCommonItem coords={mainCell} mainCell={mainCell}\r\n                                       width={width} height={height} isInventoryId={cell.id}/>\r\n        }\r\n\r\n        return (\r\n          <EquippedInventoryItem cellId={cell.id} item={cell.item}\r\n                                 allowedItemType={cell.allowedItemType}>\r\n            {children}\r\n          </EquippedInventoryItem>\r\n        );\r\n      })}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default EquippedInventoryContainer;","import React from 'react';\nimport { DndProvider } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport styled from 'styled-components';\nimport Board from \"./components/board/Board\";\nimport Alert from \"./components/layout/Alert/Alert\";\nimport EquippedInventoryContainer from \"./components/equippedInventory/equippedInventoryContainer\";\nimport {useSelector} from \"react-redux\";\n\nconst Container = styled.div`\n    display: flex;\n    flex-grow: 1;\n    padding: 2%;\n    background: linear-gradient(#515754,#1e2120);\n    @media (max-width: 780px) {\n        flex-direction: column;\n    }\n}\n`\n\nconst App: React.FC = () => {\n  // @ts-ignore\n  const equippedItemsCells = useSelector(({equippedItems}) => equippedItems.cells);\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <Container>\n        <Alert/>\n        <EquippedInventoryContainer cells={equippedItemsCells.slice(0,5)}/>\n        <Board />\n        <EquippedInventoryContainer cells={equippedItemsCells.slice(5,10)}/>\n      </Container>\n    </DndProvider>\n  );\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport App from './App';\nimport './index.css';\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}