(this["webpackJsonpitems-dnd"]=this["webpackJsonpitems-dnd"]||[]).push([[0],{27:function(e,n,t){e.exports={Alert:"Alert_Alert__2OSub","alert-danger":"Alert_alert-danger__JpjkH","alert-success":"Alert_alert-success__VexSb"}},38:function(e,n,t){e.exports=t(50)},49:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(17),i=t.n(c),o=t(4),l=t(8),u=t(31),d=t(32),s=t(3),f=t(2),h=t(9),v=function(e,n){switch(e){case 3:case 4:return 2===n||3===n||4===n?{mainCell:[3,2],width:2,height:3}:null;case 8:case 9:return 4===n||5===n?{mainCell:[8,4],width:2,height:2}:null;default:return null}},b=function(){for(var e=[],n=0;n<=5;n++){e[n]=[];for(var t=0;t<=16;t++)e[n][t]=v(t,n)}return{board:e}},m=[],p={mainCell:null,width:null,height:null,xUp:null,xDown:null,yUp:null,yDown:null,hoveredSquare:null,allHoveredSquares:[],canDrop:!1},g="item",E=function(){for(var e=[],n=0;n<10;n++)e[n]=0===n?{id:n,allowedItemType:g,item:null}:{id:n,allowedItemType:"SomeOtherType",item:null};return{cells:e}},O=Object(l.combineReducers)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SQUARES_FILL":var t=Object(h.a)(e.board),r=n.squares,a=n.mainCell,c=n.width,i=n.height;return r.forEach((function(e){var n=Object(f.a)(e,2),r=n[0],o=n[1];t[o][r]={mainCell:a,width:c,height:i}})),Object(s.a)(Object(s.a)({},e),{},{board:t});case"SQUARES_RELEASE":var o=Object(h.a)(e.board);return n.squares.forEach((function(e){var n=Object(f.a)(e,2),t=n[0],r=n[1];o[r][t]=null})),Object(s.a)(Object(s.a)({},e),{},{board:o});default:return e}},alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"ALERT_SET":return[].concat(Object(h.a)(e),[n.alert]);case"ALERT_REMOVE":return e.filter((function(e){return e.id!==n.alertId}));default:return e}},draggedItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"DRAGGED_ITEM_SET":var t=n.mainCell,r=n.width,a=n.height,c=n.xUp,i=n.xDown,o=n.yUp,l=n.yDown;return Object(s.a)(Object(s.a)({},e),{},{mainCell:t,width:r,height:a,xUp:c,xDown:i,yUp:o,yDown:l});case"DRAGGED_ITEM_RELEASE":case"HOVERED_SQUARES_REMOVE":return p;case"HOVERED_SQUARES_SET":return Object(s.a)(Object(s.a)({},e),{},{hoveredSquare:n.point,allHoveredSquares:n.squares,canDrop:n.canDrop});default:return e}},equippedItems:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E(),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"EQUIPPED_ITEM_SET":var t=Object(h.a)(e.cells);return t[n.id]=Object(s.a)(Object(s.a)({},t[n.id]),{},{item:n.item}),Object(s.a)(Object(s.a)({},e),{},{cells:t});case"EQUIPPED_ITEM_REMOVE":var r=Object(h.a)(e.cells);return r[n.id]=Object(s.a)(Object(s.a)({},r[n.id]),{},{item:null}),Object(s.a)(Object(s.a)({},e),{},{cells:r});default:return e}}}),w=[d.a],j=Object(l.createStore)(O,Object(u.composeWithDevTools)(l.applyMiddleware.apply(void 0,w))),y=t(5),I=t(53),x=t(36),S=t(6),D=t(19),_={breakpoints:{md:780},colors:{gray:"#515754",black:"#1e2120",lighterGray:"#59635f",lightGray:"#878c8a",success:"#1eff00",warning:"#f6ff00",danger:"#ff0000"}};function R(){var e=Object(y.a)(["\n  backgroundColor: background: linear-gradient(",",",");\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justifyContent: center;\n  alignItems: center;\n"]);return R=function(){return e},e}var T=S.a.div(R(),_.colors.gray,_.colors.lighterGray),A=function(e){var n=e.children;return a.a.createElement(T,null,n)},k=t(55),C=t(54),U=function(e){return{type:"ALERT_SET",alert:e}},q=function(e){return{type:"ALERT_REMOVE",alertId:e}},G=function(e,n,t){return function(r,a){for(var c=a().board.board,i=[],o="",l=e[0];l<e[0]+n;l++)for(var u=e[1];u<e[1]+t;u++)i.push([l,u]);for(var d=!0,s=function(e){for(var n=function(n){i.forEach((function(t){var r=Object(f.a)(t,2),a=r[0],i=r[1];a<0||a>16||i<0||i>5?(d=!1,o="The object can not be placed outside the board.\nThe board has the following coordinates:\n"+"x: ".concat(0," - ").concat(16,"\ny: ").concat(0," - ").concat(5)):a===e&&i===n&&null!==c[n][e]&&(d=!1,o="The object can not be placed on the other object!")}))},t=0;t<=5;t++)n(t)},h=0;h<=16;h++)s(h);r(d?M(i,e,n,t):function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return function(r){var a=Object(C.a)();r(U({msg:e,alertType:n,id:a})),setTimeout((function(){return r(q(a))}),t)}}("Sorry. "+o,"danger"))}};window.addInventory=function(e,n,t){return j.dispatch(G(e,n,t))};var M=function(e,n,t,r){return{type:"SQUARES_FILL",squares:e,mainCell:n,width:t,height:r}},L=function(e){return{type:"SQUARES_RELEASE",squares:e}},Q=function(e){var n=Object(f.a)(e,2),t=n[0],r=n[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(e){for(var n=[],i=t;i<t+a;i++)for(var o=r;o<r+c;o++)n.push([i,o]);e(L(n))}},V=function(e){var n=e.color;return a.a.createElement("div",{style:{position:"absolute",top:"0",left:"0",height:"100%",width:"100%",zIndex:0,opacity:.5,backgroundColor:n}})},H=function(e,n,t,r,a,c,i){return{type:"DRAGGED_ITEM_SET",mainCell:e,width:n,height:t,xUp:r,xDown:a,yUp:c,yDown:i}};function P(){var e=Object(y.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  box-sizing: border-box; \n  border: 1px solid ","; \n"]);return P=function(){return e},e}var z=S.a.div(P(),_.colors.lightGray),J=function(e){var n=Object(f.a)(e.coords,2),t=n[0],c=n[1],i=e.children,l=Object(r.useState)(!1),u=Object(f.a)(l,2),d=u[0],s=u[1],h=Object(o.c)((function(e){e.board;var n=e.draggedItem;return[n.hoveredSquare,n.allHoveredSquares,n.canDrop,n.mainCell,n.width,n.height]})),v=Object(f.a)(h,6),b=v[0],m=v[1],p=v[2],E=v[3],O=v[4],w=v[5],j=Object(o.b)(),y=Object(k.a)({accept:g,drop:function(e,n){n.canDrop()&&(!1===e.isInventoryId&&j(Q(E,O,w)),j(function(e){var n=Object(f.a)(e,2),t=n[0],r=n[1];return function(e,n){var a=n().draggedItem,c=a.allHoveredSquares,i=a.xDown,o=a.yDown,l=a.width,u=a.height;e(M(c,[t-i,r-o],l,u))}}([t,c])))},hover:function(){b&&b[0]===t&&b[1]===c||j(function(e){var n=Object(f.a)(e,2),t=n[0],r=n[1];return function(e,n){for(var a=n(),c=a.draggedItem,i=c.xDown,o=c.xUp,l=c.yDown,u=c.yUp,d=c.mainCell,s=c.width,h=c.height,v=a.board.board,b=[],m=t-i;m<=t+o;m++)for(var p=r-l;p<=r+u;p++)b.push([m,p]);for(var g=!0,E=function(e){for(var n=function(n){b.forEach((function(t){var r=Object(f.a)(t,2),a=r[0],c=r[1];(a<0||a>16||c<0||c>5||a===e&&c===n&&null!==v[n][e]&&(a<d[0]||a>d[0]+s-1||c<d[1]||c>d[1]+h-1))&&(g=!1)}))},t=0;t<=5;t++)n(t)},O=0;O<=16;O++)E(O);e(function(e,n,t){return{type:"HOVERED_SQUARES_SET",point:e,squares:n,canDrop:t}}([t,r],b,g))}}([t,c]))},canDrop:function(){return p}}),I=Object(f.a)(y,2);Object(D.a)(I[0]);var x=I[1];return Object(r.useEffect)((function(){var e=m.findIndex((function(e){return e[0]===t&&e[1]===c}));s(-1!==e)}),[t,c,m]),a.a.createElement(z,{ref:x},a.a.createElement(A,null,i),d&&!p&&a.a.createElement(V,{color:_.colors.danger}),d&&p&&a.a.createElement(V,{color:_.colors.success}))},W=t(56);function F(){var e=Object(y.a)(["\n  display: block;\n  position: relative;\n  cursor: move;\n  width: 100%;\n  height: 100%;\n  background-color: #000;\n"]);return F=function(){return e},e}var B=S.a.span(F()),N=function(e){var n=e.children,t=e.forwardedRef;return a.a.createElement(B,{ref:t},n)},K=function(e){var n=Object(f.a)(e.coords,2),t=n[0],r=n[1],c=e.mainCell,i=e.width,l=e.height,u=e.isInventoryId,d=void 0!==u&&u,s=Object(o.b)(),h=Object(W.a)({item:{type:g,isInventoryId:d},begin:function(){s(function(e){var n=Object(f.a)(e,2),t=n[0],r=n[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[t,r],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return function(e){var n=Object(f.a)(a,2),o=n[0],l=n[1];e(H(a,c,i,o+c-1-t,t-o,l+i-1-r,r-l))}}([t,r],c,i,l))},end:function(e,n){var t;console.log("end"),n.didDrop()&&!1!==d&&s((t=d,function(e){e(function(e){return{type:"EQUIPPED_ITEM_REMOVE",id:e}}(t))})),s({type:"HOVERED_SQUARES_REMOVE"})},collect:function(){return{}}}),v=Object(f.a)(h,2);Object(D.a)(v[0]);var b=v[1];return a.a.createElement(N,{forwardedRef:b})};function X(){var e=Object(y.a)(["\n    width: 68%;\n    margin-left: 1%;\n    margin-right: 1%;\n    display: grid;\n    grid-template-columns: repeat(17, 1fr);\n    grid-template-rows: repeat(6, 1fr);\n    overflow: hidden;\n    @media (max-width: ","px) {\n      margin: 1% auto;\n      width: 100%;\n    }\n"]);return X=function(){return e},e}var Y=S.a.div(X(),_.breakpoints.md),Z=function(){var e=[],n=Object(o.c)((function(e){return e.board.board})),t=Object(r.useState)(null),c=Object(f.a)(t,2),i=c[0],l=c[1],u=Object(r.useRef)(null);Object(r.useEffect)((function(){function e(){var e=u.current.clientWidth;l(.35294*e)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]);for(var d=function(e,t){if(!n)return null;var r=null,c=n[e][t];if(c){var i=c.mainCell,o=c.width,l=c.height;r=a.a.createElement(K,{coords:[t,e],mainCell:i,width:o,height:l})}return a.a.createElement(J,{key:20*t+e,coords:[t,e]},r)},s=0;s<=5;s++)for(var h=0;h<=16;h++)e.push(d(s,h));return a.a.createElement(Y,{ref:u,style:{height:"".concat(i+0,"px")}},e)},$=t(27),ee=t.n($),ne=function(){var e=Object(o.c)((function(e){return e.alert}));return e.length>0&&e.map((function(e,n){return a.a.createElement("div",{key:e.id,className:"".concat(ee.a.Alert," ").concat(ee.a["alert-"+e.alertType]),style:{left:"".concat((window.innerWidth/2-150).toString(),"px"),top:"".concat(100*n+60,"px")}},e.msg)}))};function te(){var e=Object(y.a)(["\n    width: 90%;\n    position: relative;\n    height: 16%;\n    border-radius: 5px;\n    background: linear-gradient(",",",");\n    &:last-child {\n      background: linear-gradient(",",",");\n    } \n    @media (max-width: ","px) {\n      height: 100%;\n      width: 17%;\n      flex-direction: row;\n    }\n"]);return te=function(){return e},e}var re=S.a.div(te(),_.colors.lightGray,_.colors.lighterGray,_.colors.lightGray,_.colors.gray,_.breakpoints.md),ae=function(e){var n=e.cellId,t=e.allowedItemType,r=(e.item,e.children),c=Object(o.b)(),i=Object(o.c)((function(e){return[e.draggedItem,e.equippedItems.cells]})),l=Object(f.a)(i,2),u=l[0],d=l[1],s=u.mainCell,h=u.width,v=u.height,b=Object(k.a)({accept:t,drop:function(e,t){t.canDrop()&&(c(Q(s,h,v)),c(function(e){return function(n,t){var r=t().draggedItem,a=r.mainCell,c=r.width,i=r.height;n(function(e,n){return{type:"EQUIPPED_ITEM_SET",id:e,item:n}}(e,{mainCell:a,width:c,height:i}))}}(n)))},canDrop:function(){return d.find((function(e){return e.id===n&&null===e.item}))},collect:function(e){return{isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()}}}),m=Object(f.a)(b,2),p=m[0],g=p.isOver,E=p.canDrop,O=m[1];return a.a.createElement(re,{ref:O},r,g&&E&&a.a.createElement(V,{color:_.colors.green}),g&&!E&&a.a.createElement(V,{color:_.colors.danger}),!g&&E&&a.a.createElement(V,{color:_.colors.warning}))};function ce(){var e=Object(y.a)(["\n    width: 15%;\n    max-width: 15%;\n    height: 100vh;\n    box-sizing: border-box;\n    padding: 2%;\n    background: linear-gradient(",",",");\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-around;\n    @media (max-width: ","px) {\n      height: 20vh;\n      min-width: 100%;\n      flex-direction: row;\n    }\n  "]);return ce=function(){return e},e}var ie=function(e){var n=e.cells,t=S.a.div(ce(),_.colors.gray,_.colors.lighterGray,_.breakpoints.md);return a.a.createElement(t,null,n.map((function(e){var n=null;if(e.item){var t=e.item,r=t.mainCell,c=t.width,i=t.height;n=a.a.createElement(K,{coords:r,mainCell:r,width:c,height:i,isInventoryId:e.id})}return a.a.createElement(ae,{cellId:e.id,item:e.item,allowedItemType:e.allowedItemType},n)})))};function oe(){var e=Object(y.a)(["\n    display: flex;\n    flex-grow: 1;\n    padding: 2%;\n    background: linear-gradient(",",",");\n    @media (max-width: ","px) {\n        flex-direction: column;\n    }\n}\n"]);return oe=function(){return e},e}var le=S.a.div(oe(),_.colors.gray,_.colors.black,_.breakpoints.md),ue=function(){var e=Object(o.c)((function(e){return e.equippedItems.cells}));return a.a.createElement(I.a,{backend:x.a},a.a.createElement(le,null,a.a.createElement(ne,null),a.a.createElement(ie,{cells:e.slice(0,5)}),a.a.createElement(Z,null),a.a.createElement(ie,{cells:e.slice(5,10)})))};t(49);i.a.render(a.a.createElement(o.a,{store:j},a.a.createElement(ue,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.83d9c445.chunk.js.map